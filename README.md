![header](https://capsule-render.vercel.app/api?type=waving&height=300&color=gradient&text=juhee-bot%20project&textBg=false)

# 주희봇 (juhee-bot) v3.10

<img src="./juhee-profile.png" width="30%" />

## 📌 소개

주희봇은 Discord 서버에서 텍스트 메시지를 음성으로 변환하여 음성 채널에서 읽어주는 TTS(Text-to-Speech) 봇입니다.

Microsoft Azure Cognitive Services의 고품질 음성 합성 엔진을 사용하며, [discord.js](https://discord.js.org) 라이브러리로 제작되었습니다.

### ✨ 주요 기능

- 🎤 **고품질 TTS**: Microsoft Azure의 한국어 음성 합성 엔진
- 🎵 **다양한 목소리**: 10가지 음성 옵션 (남성 5종, 여성 5종)
- ⚡ **속도 조절**: 0~100 범위로 자유로운 속도 설정
- 🌏 **다국어 지원**: 한국어, 영어, 일본어 자동 감지
- 🔒 **개인정보 보호**: 메시지는 TTS 변환 후 즉시 삭제
- 🤖 **자동 관리**: 비활성 시 자동 퇴장, 빈 채널 감지

---

## 🚀 시작하기

### 서버에 주희봇 초대하기

**[여기를 클릭하여 봇 초대](https://discord.com/api/oauth2/authorize?client_id=813805094352715806)**

### 커뮤니티

**[주희봇 공식 Discord 서버](https://discord.gg/bbVVH69TTY)** - 문의, 피드백, 업데이트 소식

---

## 📖 사용법

주희봇은 Discord 표준 **슬래시 커맨드(Slash Commands)**를 지원합니다.

### 기본 명령어

| 명령어 | 설명 |
|--------|------|
| `/들어와` | 봇을 음성 채널에 입장시킵니다 |
| `/나가` | 봇을 음성 채널에서 퇴장시킵니다 |

### 채널 설정

| 명령어 | 설명 |
|--------|------|
| `/채널설정 [채널명]` | TTS 메시지를 읽을 채팅 채널을 설정합니다 |
| `/채널해제` | 설정된 TTS 채널을 제거합니다 |

### 개인 설정

| 명령어 | 설명 |
|--------|------|
| `/목소리설정 [목소리]` | 9가지 한국어 음성 중 원하는 목소리를 선택합니다 |
| `/현재목소리` | 현재 설정된 목소리를 확인합니다 |
| `/속도설정 [0~100]` | TTS 속도를 조절합니다 (0: 느림, 100: 빠름) |
| `/현재속도` | 현재 설정된 속도를 확인합니다 |

### 서버 설정

| 명령어 | 설명 |
|--------|------|
| `/음소거` | 봇의 채팅 메시지를 숨깁니다 (명령어 응답만 개인에게 표시) |
| `/음소거해제` | 음소거 기능을 해제합니다 |

---

## 🎙️ 지원되는 목소리

### 한국어 기본 음성

| 번호 | 목소리 | 성별 | 특징 |
|------|--------|------|------|
| 1 | 선히 | 여성 | 밝고 명랑한 목소리 |
| 2 | 인준 | 남성 | 차분하고 안정적인 목소리 |
| 3 | 현수 | 남성 | 또렷하고 신뢰감 있는 목소리 |
| 4 | 봉진 | 남성 | 깊고 부드러운 목소리 |
| 5 | 국민 | 남성 | 젊고 활기찬 목소리 |
| 6 | 지민 | 여성 | 부드럽고 친근한 목소리 |
| 7 | 서현 | 여성 | 자연스럽고 편안한 목소리 |
| 8 | 순복 | 여성 | 따뜻하고 포근한 목소리 |
| 9 | 유진 | 여성 | 생동감 있고 경쾌한 목소리 |

### 다국어 지원 음성

| 번호 | 목소리 | 성별 | 특징 |
|------|--------|------|------|
| 10 | 현수 (다국어) | 남성 | 한국어, 영어, 일본어 외 다양한 언어 지원 |

> **💡 Tip**: 다국어 지원 음성은 실험적 기능입니다. 추후 더 많은 다국어 음성이 추가될 예정입니다.

---

## ⚙️ 자동 기능

- **자동 퇴장**: 30분간 상호작용이 없으면 자동으로 음성 채널 퇴장
- **빈 채널 감지**: 음성 채널에 봇만 남으면 자동 퇴장
- **채널 제한**: 설정된 TTS 채널의 메시지만 읽음
- **사용자 제한**: 음성 채널에 있는 사용자의 메시지만 읽음
- **메시지 길이 제한**: 최대 200자까지 처리

---

## 🔒 개인정보 보호

주희봇은 사용자의 개인정보를 소중히 다룹니다:

- ✅ **메시지 내용**: TTS 변환 후 즉시 삭제 (저장 안 함)
- ✅ **로그 파일**: 7일 후 자동 삭제
- ✅ **서버 데이터**: 봇 퇴장 시 자동 삭제
- ✅ **오픈소스**: 코드 공개로 투명한 개인정보 처리

자세한 내용은 [개인정보 보호정책](./개인정보%20보호정책.md)을 참고해주세요.

**개인정보 관련 문의**: kevin1113dev@gmail.com

---

## 📝 업데이트 로그

### [2025.11.03] 주희 v3.10 업데이트 내역

- 주희봇의 무중단 배포를 위하여 PM2를 적용하였습니다.
- 샤딩을 적용하여 2500개 이상의 서버에서 안정적으로 동작하도록 수정하였습니다.
- 이제 봇 업데이트 시 봇을 종료하지 않습니다.

### [2025.10.30] 주희 v3.9 업데이트 내역

**🎉 대규모 코드 개선 및 문서화 업데이트**

- ✨ **코드 품질 개선**
  - 전체 코드베이스 JSDoc 주석 추가로 가독성 대폭 향상
  - 모든 함수, 클래스, 매개변수에 상세한 설명 추가
  - IDE 자동완성 및 타입 힌트 지원 강화

- 📚 **문서화 개선**
  - 개인정보 보호정책 전면 개정 (구체적인 항목 명시)
  - README 재구성으로 사용자 경험 개선
  - 로그 보관 기간(7일) 및 자동 삭제 시스템 명시

- 🔐 **보안 강화**
  - Path traversal 공격 방지 강화
  - XSS, SQL Injection 방지 로직 문서화
  - 환경변수 관리 체계화

- 🐛 **안정성 개선**
  - 오류 처리 로직 강화
  - 재연결 메커니즘 개선 (최대 3번 재시도)
  - 타임아웃 처리 개선

- 🗄️ **데이터 관리**
  - 서버 퇴장 시 자동 데이터 정리
  - CASCADE 삭제 정책 적용
  - 로그 7일 자동 삭제 시스템

### [2025.09.07] 주희 v3.8 업데이트 내역

- 💰 **서비스 안정화**
  - 월 500만자 초과로 Azure TTS 유료 티어 전환
  - 지속 가능한 서비스 운영을 위한 후원 계좌 안내
  - 후원계좌: 카카오뱅크 3333-18-5316602

- 🌍 **다국어 지원 강화**
  - 현수(다국어 지원) 음성 추가
  - 한국어, 영어, 일본어 외 다양한 언어 발음 지원
  - 실험적 기능으로 추후 확대 예정

### [2025.07.27] 주희 v3.7 업데이트 내역

- 📝 **초성체 지원**: ㄱㅅ, ㅇㅈ 등 다양한 초성체 읽기 기능 추가
- 😊 **이모지 읽기**: 디스코드 이모지를 텍스트로 변환하여 읽어줌
- 💝 **후원 계좌 오픈**: 봇 프로필에서 확인 가능

### [2025.06.30] 주희 v3.6.1 업데이트 내역

- 🛡️ **안정성 강화**: 공지 전송 권한 오류 예외 처리 개선

### [2025.06.30] 주희 v3.6 업데이트 내역

- 🛡️ **오류 처리 강화**: 서비스 다운 방지를 위한 예외 처리 로직 개선
- 📊 **로그 시스템 개선**: 체계적인 로깅으로 문제 추적 용이

### [2025.06.04] 주희 v3.5 업데이트 내역

- 🎤 **현재목소리 조회**: `/현재목소리` 명령어 추가
- 🗄️ **데이터베이스 개선**: 상세 로그 분석 가능

### [2024.10.23] 주희 v3.4.2 업데이트 내역

- 🤫 **속삭임 기능**: (괄호) 안의 문자열을 읽지 않음

### [2024.09.08] 주희 v3.4.1 업데이트 내역

- 🇺🇸 **영어 발음 개선**: 원어민 수준의 영어 발음

### [2024.09.08] 주희 v3.4 업데이트 내역

- 🇯🇵 **일본어 지원**: 일본어 텍스트 읽기 기능 추가
- 🔄 **API 업데이트**: Discord API 최신화
- 🐛 **버그 수정**: 공지 발송 후 봇 멈춤 현상 해결

### [2024.08.16] 주희 v3.3 업데이트 내역

- 🚪 **자동 퇴장**: 빈 음성 채널 자동 감지 및 퇴장
- 📢 **임베드 공지**: 공지사항 디자인 개선

### [2024.04.12] 주희 v3.2.3 업데이트 내역

- 📢 **공지 기능**: TTS 채널에 업데이트 공지 자동 발송

### [2024.02.23] 주희 v3.2.1, v3.2.2 업데이트 내역

- 🐛 **긴급 패치**: 음성 채널 감지 버그 수정
- 🎨 **프로필 변경**: 뜰밤님 작품으로 프로필 사진 변경

### [2024.02.03] 주희 v3.2 업데이트 내역

- ⏱️ **퇴장 시간 연장**: 10분 → 30분으로 변경
- 🔇 **음소거 기능**: `/음소거` 명령어 추가
- ⚡ **기본 속도**: TTS 기본 속도 30%로 설정

### [2024.01.29] 주희 v3.1 업데이트 내역

- ⏰ **타임아웃**: 10분 비활성 시 자동 퇴장
- 🎵 **재생 대기**: 다른 메시지 재생 중 대기 기능
- 🗑️ **채널 해제**: `/채널해제` 명령어 추가

---

## 🛠️ 기술 스택

- **언어**: TypeScript
- **런타임**: Node.js
- **봇 프레임워크**: discord.js v14
- **음성**: @discordjs/voice
- **TTS 엔진**: Microsoft Azure Cognitive Services
- **데이터베이스**: SQLite (Sequelize ORM)
- **로깅**: 커스텀 로거 (한국 시간대 지원)
- **프로세스 관리**: PM2 (무중단 배포)
- **샤딩**: Discord.js ShardingManager (확장성)

---

### 주요 배포 기능

- ✅ **무중단 배포**: PM2를 사용한 zero-downtime deployment
- ✅ **자동 재시작**: 오류 발생 시 자동으로 재시작
- ✅ **로그 관리**: 체계적인 로그 수집 및 관리
- ✅ **프로세스 모니터링**: 실시간 상태 확인
- ✅ **샤딩 지원**: 대규모 서버를 위한 수평 확장

---

## 📋 개발 계획 (To Do)

- [ ] **자동 배포**: GitHub Actions를 통한 AWS EC2 배포 자동화
- [x] ~~공지사항 기능~~ (완료)
- [ ] **웹 대시보드**: 서버 및 사용자 관리 대시보드
- [x] ~~오픈소스 라이선스 명시~~ (완료)
- [x] ~~로그 자동화~~ (완료)
- [ ] **도움말 기능**: `/도움말` 명령어 추가
- [ ] **피드백 기능**: 사용자 피드백 수집 시스템
- [x] ~~빈 채널 자동 퇴장~~ (완료)
- [ ] **통계 기능**: 서버별 사용 통계
- [ ] **플레이리스트**: 자주 사용하는 문구 저장 기능

---

## 🤝 기여 및 문의

### 오픈소스

이 프로젝트는 오픈소스이며, 누구나 코드를 확인하고 기여할 수 있습니다.

- **GitHub**: [kevin1113-github/juhee-bot](https://github.com/kevin1113-github/juhee-bot)
- **라이선스**: 저장소의 [LICENSE](./LICENSE) 파일 참조

### 버그 제보 및 문의

- 📧 **이메일**: kevin1113dev@gmail.com
- 💻 **GitHub**: [@kevin1113-github](https://github.com/kevin1113-github/)
- 💬 **Discord**: [주희봇 공식 서버](https://discord.gg/bbVVH69TTY)

### 후원

주희봇 운영 및 개발을 후원해주세요!

- 💳 **후원계좌**: 카카오뱅크 3333-18-5316602
- 💰 월 TTS 사용량이 500만자를 초과하여 유료 티어를 사용 중입니다
- 🙏 여러분의 후원이 지속 가능한 서비스를 만듭니다

---

## 📜 라이선스 및 저작권

- 주희봇 소스코드: 저장소의 LICENSE 파일 참조
- 주희봇 프로필 이미지: 뜰밤님 작품
- Microsoft Azure TTS: Microsoft의 서비스 약관 적용

---

<div align="center">

**Made with ❤️ by [kevin1113-github](https://github.com/kevin1113-github/)**

[봇 초대하기](https://discord.com/api/oauth2/authorize?client_id=813805094352715806) | 
[공식 서버](https://discord.gg/bbVVH69TTY) | 
[개인정보 보호정책](./개인정보%20보호정책.md)

</div>
